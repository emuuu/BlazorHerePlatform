@page "/map-shapes"
@rendermode InteractiveServer

<PageTitle>Shapes</PageTitle>

<h3>Shapes Demo</h3>
<p>Declarative shape components â€” Polyline, Circle, and Rectangle as child components of AdvancedHereMap.</p>

<details class="mb-3">
    <summary class="fw-bold" role="button">Usage</summary>
    <pre class="bg-light border rounded p-3 mt-2 mb-0"><code>&lt;AdvancedHereMap Options="@@_mapOptions" Height="500px"&gt;

    &lt;PolylineComponent
        Path="@@_path"
        StrokeColor="#0066FF"
        LineWidth="4"
        LineCap="round"
        Visible="@@_showPolyline"
        OnClick="@@(e =&gt; ...)" /&gt;

    &lt;CircleComponent
        CenterLat="52.5163"
        CenterLng="13.3777"
        Radius="@@_radius"
        StrokeColor="#FF0000"
        FillColor="rgba(255, 0, 0, 0.2)"
        Visible="@@_showCircle" /&gt;

    &lt;RectComponent
        Top="52.525" Left="13.410"
        Bottom="52.515" Right="13.430"
        StrokeColor="#FF9900"
        FillColor="rgba(255, 153, 0, 0.25)"
        Visible="@@_showRect" /&gt;

&lt;/AdvancedHereMap&gt;</code></pre>
</details>

<AdvancedHereMap Options="@_mapOptions" Height="500px">
    <PolylineComponent
        Path="@_polylinePath"
        StrokeColor="#0066FF"
        LineWidth="4"
        LineCap="round"
        Visible="@_showPolyline"
        OnClick="@(e => _status = $"Polyline clicked at ({e.Position?.Lat:F4}, {e.Position?.Lng:F4})")" />

    <CircleComponent
        CenterLat="52.5163"
        CenterLng="13.3777"
        Radius="@_circleRadius"
        StrokeColor="#FF0000"
        FillColor="rgba(255, 0, 0, 0.2)"
        LineWidth="2"
        Visible="@_showCircle"
        OnClick="@(e => _status = $"Circle clicked at ({e.Position?.Lat:F4}, {e.Position?.Lng:F4})")" />

    <RectComponent
        Top="52.525"
        Left="13.410"
        Bottom="52.515"
        Right="13.430"
        StrokeColor="#FF9900"
        FillColor="rgba(255, 153, 0, 0.25)"
        LineWidth="2"
        Visible="@_showRect"
        OnClick="@(e => _status = $"Rect clicked at ({e.Position?.Lat:F4}, {e.Position?.Lng:F4})")" />
</AdvancedHereMap>

<div class="mt-3">
    <div class="btn-group me-3" role="group">
        <button class="btn btn-outline-primary @(_showPolyline ? "active" : "")" @onclick="@(() => _showPolyline = !_showPolyline)">
            Polyline
        </button>
        <button class="btn btn-outline-danger @(_showCircle ? "active" : "")" @onclick="@(() => _showCircle = !_showCircle)">
            Circle
        </button>
        <button class="btn btn-outline-warning @(_showRect ? "active" : "")" @onclick="@(() => _showRect = !_showRect)">
            Rectangle
        </button>
    </div>

    <label class="ms-3">
        Circle Radius: <input type="range" min="100" max="2000" step="50" @bind="_circleRadius" @bind:event="oninput" /> @_circleRadius m
    </label>
</div>

@if (!string.IsNullOrEmpty(_status))
{
    <div class="mt-3 alert alert-info">
        @_status
    </div>
}

@code {
    private MapOptions _mapOptions = new()
    {
        Center = new LatLngLiteral(52.52, 13.405),
        Zoom = 13,
        EnableUI = true,
        EnableInteraction = true
    };

    private bool _showPolyline = true;
    private bool _showCircle = true;
    private bool _showRect = true;
    private double _circleRadius = 500;
    private string? _status;

    private List<LatLngLiteral> _polylinePath = new()
    {
        new(52.5200, 13.3900),
        new(52.5230, 13.4000),
        new(52.5180, 13.4100),
        new(52.5210, 13.4200)
    };
}
